{
  "totalTests": 17,
  "passed": 6,
  "failed": 11,
  "testResults": [
    {
      "endpoint": "/api/health",
      "method": "GET",
      "status": 200,
      "success": true,
      "responseTime": 368,
      "data": {
        "status": "healthy",
        "timestamp": "2025-07-20T15:46:17.601Z",
        "version": "0.1.0",
        "environment": "development",
        "uptime": 83.615991916,
        "responseTime": "175ms",
        "services": {
          "database": {
            "status": "healthy",
            "latency": "175ms"
          },
          "llm": {
            "status": "healthy",
            "providers": {
              "gemini": true,
              "openai": true
            }
          },
          "environment": {
            "status": "healthy",
            "missingVars": []
          }
        },
        "system": {
          "nodeVersion": "v20.18.3",
          "platform": "darwin",
          "arch": "arm64",
          "memory": {
            "used": 201,
            "total": 208,
            "external": 291
          }
        }
      },
      "category": "health"
    },
    {
      "endpoint": "/api/debug/env",
      "method": "GET",
      "status": 200,
      "success": true,
      "responseTime": 1216,
      "data": {
        "message": "Environment check",
        "environment": {
          "NODE_ENV": "development",
          "NEXTAUTH_URL": "http://localhost:3000",
          "JOHN_DEERE_ENVIRONMENT": "sandbox",
          "JOHN_DEERE_CLIENT_ID": "SET",
          "JOHN_DEERE_CLIENT_SECRET": "SET",
          "NEXTAUTH_SECRET": "SET",
          "DATABASE_URL": "SET",
          "redirectUri": "http://localhost:3000/api/auth/johndeere/callback",
          "isProduction": false,
          "timestamp": "2025-07-20T15:46:18.826Z"
        },
        "recommendations": {
          "nextauthUrl": "OK",
          "johnDeereClientId": "OK",
          "johnDeereClientSecret": "OK",
          "redirectUriMatch": "Update John Deere redirect URI to: http://localhost:3000/api/auth/johndeere/callback"
        }
      },
      "category": "health"
    },
    {
      "endpoint": "/api/johndeere/connection-status",
      "method": "GET",
      "status": 401,
      "success": false,
      "responseTime": 152,
      "data": {
        "status": "auth_required",
        "message": "User authentication required. Please sign in first."
      },
      "category": "connection-management",
      "errorType": "User authentication required. Please sign in first."
    },
    {
      "endpoint": "/api/auth/user",
      "method": "GET",
      "status": 401,
      "success": false,
      "responseTime": 181,
      "data": {
        "error": "Authentication required"
      },
      "category": "authentication",
      "errorType": "Authentication required"
    },
    {
      "endpoint": "/api/auth/johndeere/status",
      "method": "GET",
      "status": 401,
      "success": false,
      "responseTime": 126,
      "data": {
        "error": "Authentication required"
      },
      "category": "authentication",
      "errorType": "Authentication required"
    },
    {
      "endpoint": "/api/johndeere/organizations",
      "method": "GET",
      "status": 500,
      "success": false,
      "responseTime": 560,
      "data": {
        "error": "Failed to fetch organizations"
      },
      "category": "organizations",
      "errorType": "Failed to fetch organizations"
    },
    {
      "endpoint": "/api/files/upload",
      "method": "POST",
      "status": 500,
      "success": false,
      "responseTime": 181,
      "data": {
        "error": "Failed to upload file: Content-Type was not one of \"multipart/form-data\" or \"application/x-www-form-urlencoded\"."
      },
      "category": "files",
      "errorType": "Failed to upload file: Content-Type was not one of \"multipart/form-data\" or \"application/x-www-form-urlencoded\"."
    },
    {
      "endpoint": "/api/mcp/tools",
      "method": "GET",
      "status": 200,
      "success": true,
      "responseTime": 139,
      "data": {
        "success": true,
        "tools": [
          {
            "name": "scheduleFieldOperation",
            "description": "Schedule a field operation (planting, harvesting, spraying, etc.)",
            "parameters": {
              "type": "object",
              "properties": {
                "fieldId": {
                  "type": "string",
                  "description": "ID of the field for the operation"
                },
                "operationType": {
                  "type": "string",
                  "enum": [
                    "planting",
                    "harvesting",
                    "spraying",
                    "fertilizing",
                    "cultivation",
                    "irrigation"
                  ],
                  "description": "Type of field operation to schedule"
                },
                "scheduledDate": {
                  "type": "string",
                  "format": "date-time",
                  "description": "Planned date for the operation (YYYY-MM-DD or YYYY-MM-DDTHH:mm:ss)"
                },
                "equipmentId": {
                  "type": "string",
                  "description": "ID of equipment to use for the operation"
                },
                "notes": {
                  "type": "string",
                  "description": "Additional notes or instructions for the operation"
                },
                "priority": {
                  "type": "string",
                  "enum": [
                    "low",
                    "medium",
                    "high",
                    "urgent"
                  ],
                  "description": "Priority level of the operation"
                }
              },
              "required": [
                "fieldId",
                "operationType",
                "scheduledDate"
              ]
            }
          },
          {
            "name": "getFieldRecommendations",
            "description": "Get AI-powered recommendations for field operations based on current conditions",
            "parameters": {
              "type": "object",
              "properties": {
                "fieldId": {
                  "type": "string",
                  "description": "ID of the field to analyze"
                },
                "season": {
                  "type": "string",
                  "enum": [
                    "spring",
                    "summer",
                    "fall",
                    "winter"
                  ],
                  "description": "Current season for context"
                },
                "cropType": {
                  "type": "string",
                  "description": "Type of crop planted or planned (corn, soybeans, wheat, etc.)"
                }
              },
              "required": [
                "fieldId"
              ]
            }
          },
          {
            "name": "updateFieldStatus",
            "description": "Update the current status of a field (planted, growing, ready for harvest, etc.)",
            "parameters": {
              "type": "object",
              "properties": {
                "fieldId": {
                  "type": "string",
                  "description": "ID of the field to update"
                },
                "status": {
                  "type": "string",
                  "enum": [
                    "prepared",
                    "planted",
                    "growing",
                    "ready_for_harvest",
                    "harvested",
                    "fallow"
                  ],
                  "description": "Current status of the field"
                },
                "cropType": {
                  "type": "string",
                  "description": "Type of crop currently in the field"
                },
                "plantingDate": {
                  "type": "string",
                  "format": "date-time",
                  "description": "Date when the field was planted (if applicable) (YYYY-MM-DD or YYYY-MM-DDTHH:mm:ss)"
                },
                "expectedHarvestDate": {
                  "type": "string",
                  "format": "date-time",
                  "description": "Expected harvest date (if applicable) (YYYY-MM-DD or YYYY-MM-DDTHH:mm:ss)"
                },
                "notes": {
                  "type": "string",
                  "description": "Additional notes about the field status"
                }
              },
              "required": [
                "fieldId",
                "status"
              ]
            }
          },
          {
            "name": "scheduleEquipmentMaintenance",
            "description": "Schedule maintenance for farm equipment",
            "parameters": {
              "type": "object",
              "properties": {
                "equipmentId": {
                  "type": "string",
                  "description": "ID of the equipment needing maintenance"
                },
                "maintenanceType": {
                  "type": "string",
                  "enum": [
                    "routine",
                    "repair",
                    "inspection",
                    "oil_change",
                    "filter_replacement",
                    "tire_check"
                  ],
                  "description": "Type of maintenance needed"
                },
                "scheduledDate": {
                  "type": "string",
                  "format": "date-time",
                  "description": "Planned date for maintenance (YYYY-MM-DD or YYYY-MM-DDTHH:mm:ss)"
                },
                "priority": {
                  "type": "string",
                  "enum": [
                    "low",
                    "medium",
                    "high",
                    "urgent"
                  ],
                  "description": "Priority level of the maintenance"
                },
                "description": {
                  "type": "string",
                  "description": "Description of the maintenance work needed"
                },
                "estimatedCost": {
                  "type": "number",
                  "description": "Estimated cost of the maintenance"
                }
              },
              "required": [
                "equipmentId",
                "maintenanceType",
                "scheduledDate"
              ]
            }
          },
          {
            "name": "getEquipmentAlerts",
            "description": "Get current alerts and warnings for equipment",
            "parameters": {
              "type": "object",
              "properties": {
                "equipmentId": {
                  "type": "string",
                  "description": "ID of specific equipment (optional - if not provided, returns all alerts)"
                },
                "alertType": {
                  "type": "string",
                  "enum": [
                    "maintenance_due",
                    "error",
                    "warning",
                    "fuel_low",
                    "hours_high"
                  ],
                  "description": "Filter by specific alert type"
                }
              },
              "required": []
            }
          },
          {
            "name": "updateEquipmentStatus",
            "description": "Update the operational status of equipment",
            "parameters": {
              "type": "object",
              "properties": {
                "equipmentId": {
                  "type": "string",
                  "description": "ID of the equipment to update"
                },
                "status": {
                  "type": "string",
                  "enum": [
                    "operational",
                    "in_use",
                    "maintenance",
                    "repair_needed",
                    "out_of_service"
                  ],
                  "description": "Current operational status"
                },
                "location": {
                  "type": "string",
                  "description": "Current location of the equipment"
                },
                "operatorNotes": {
                  "type": "string",
                  "description": "Notes from the equipment operator"
                },
                "fuelLevel": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 100,
                  "description": "Current fuel level percentage"
                },
                "engineHours": {
                  "type": "number",
                  "description": "Current engine hours reading"
                }
              },
              "required": [
                "equipmentId",
                "status"
              ]
            }
          },
          {
            "name": "get_equipment_details",
            "description": "Get detailed information for a specific piece of equipment, including engine hours.",
            "parameters": {
              "type": "object",
              "properties": {
                "equipmentId": {
                  "type": "string",
                  "description": "The ID of the equipment to retrieve details for."
                },
                "organizationId": {
                  "type": "string",
                  "description": "The ID of the organization the equipment belongs to."
                }
              },
              "required": [
                "equipmentId",
                "organizationId"
              ]
            }
          },
          {
            "name": "get_field_operation_history",
            "description": "Get the history of operations for a specific field, such as applications, planting, or harvest.",
            "parameters": {
              "type": "object",
              "properties": {
                "fieldId": {
                  "type": "string",
                  "description": "The ID of the field to retrieve the operation history for."
                },
                "organizationId": {
                  "type": "string",
                  "description": "The ID of the organization the field belongs to."
                }
              },
              "required": [
                "fieldId",
                "organizationId"
              ]
            }
          },
          {
            "name": "get_field_boundary",
            "description": "Get boundary coordinates and geographic information for a specific field by name or ID.",
            "parameters": {
              "type": "object",
              "properties": {
                "fieldName": {
                  "type": "string",
                  "description": "The name of the field to get boundary information for (e.g., \"North Field\", \"Field 1\"). Use this when user refers to field by name."
                },
                "fieldId": {
                  "type": "string",
                  "description": "The ID of the field to get boundary information for. Use this when you have the exact field ID."
                },
                "organizationId": {
                  "type": "string",
                  "description": "The ID of the organization the field belongs to. Optional - will auto-detect if not provided."
                }
              },
              "required": []
            }
          },
          {
            "name": "getCurrentWeather",
            "description": "Get current weather conditions for a specific location. Includes agricultural data like soil temperature, humidity, wind conditions, and spray recommendations.",
            "parameters": {
              "type": "object",
              "properties": {
                "location": {
                  "type": "string",
                  "description": "Location name (e.g., \"Iowa City, IA\" or \"Barcelona, Spain\")"
                },
                "latitude": {
                  "type": "number",
                  "description": "Latitude coordinate (alternative to location name)"
                },
                "longitude": {
                  "type": "number",
                  "description": "Longitude coordinate (alternative to location name)"
                }
              },
              "required": []
            }
          },
          {
            "name": "getWeatherForecast",
            "description": "Get weather forecast for a specific location with agricultural insights. Default is 7 days, can be customized.",
            "parameters": {
              "type": "object",
              "properties": {
                "location": {
                  "type": "string",
                  "description": "Location name (e.g., \"Iowa City, IA\" or \"Barcelona, Spain\")"
                },
                "latitude": {
                  "type": "number",
                  "description": "Latitude coordinate (alternative to location name)"
                },
                "longitude": {
                  "type": "number",
                  "description": "Longitude coordinate (alternative to location name)"
                },
                "days": {
                  "type": "number",
                  "description": "Number of forecast days (1-7, default: 7)",
                  "minimum": 1,
                  "maximum": 7
                }
              },
              "required": []
            }
          },
          {
            "name": "getEUMarketPrices",
            "description": "Get current agricultural market PRICES (cost per unit) from the EU Commission. Use this for ANY price-related queries including \"price per ton\", \"cost of corn\", \"monthly prices\", etc.",
            "parameters": {
              "type": "object",
              "properties": {
                "sector": {
                  "type": "string",
                  "enum": [
                    "beef",
                    "pigmeat",
                    "dairy",
                    "eggs-poultry",
                    "sheep-goat",
                    "cereals",
                    "rice",
                    "oilseeds",
                    "fruits-vegetables",
                    "sugar",
                    "olive-oil",
                    "wine",
                    "fertilizer",
                    "organic"
                  ],
                  "description": "Agricultural market sector"
                },
                "memberState": {
                  "type": "string",
                  "description": "EU member state code (e.g., \"DE\", \"FR\", \"IT\") or \"EU\" for aggregate data"
                },
                "limit": {
                  "type": "number",
                  "description": "Maximum number of price records to return",
                  "minimum": 1,
                  "maximum": 50
                }
              },
              "required": [
                "sector"
              ]
            }
          },
          {
            "name": "getEUProductionData",
            "description": "Get agricultural production QUANTITIES (how much was produced) from the EU Commission. Use this for production volume queries like \"how much corn was produced\", \"harvest amounts\", etc. NOT for prices.",
            "parameters": {
              "type": "object",
              "properties": {
                "sector": {
                  "type": "string",
                  "enum": [
                    "beef",
                    "pigmeat",
                    "dairy",
                    "eggs-poultry",
                    "sheep-goat",
                    "cereals",
                    "rice",
                    "oilseeds",
                    "fruits-vegetables",
                    "sugar",
                    "olive-oil",
                    "wine",
                    "fertilizer",
                    "organic"
                  ],
                  "description": "Agricultural market sector"
                },
                "memberState": {
                  "type": "string",
                  "description": "EU member state code (e.g., \"DE\", \"FR\", \"IT\") or \"EU\" for aggregate data"
                },
                "year": {
                  "type": "number",
                  "description": "Year for production data (defaults to current year)"
                },
                "limit": {
                  "type": "number",
                  "description": "Maximum number of production records to return",
                  "minimum": 1,
                  "maximum": 50
                }
              },
              "required": [
                "sector"
              ]
            }
          },
          {
            "name": "getEUTradeData",
            "description": "Get agricultural trade statistics (imports/exports) from the EU Commission for specific sectors.",
            "parameters": {
              "type": "object",
              "properties": {
                "sector": {
                  "type": "string",
                  "enum": [
                    "beef",
                    "pigmeat",
                    "dairy",
                    "eggs-poultry",
                    "sheep-goat",
                    "cereals",
                    "rice",
                    "oilseeds",
                    "fruits-vegetables",
                    "sugar",
                    "olive-oil",
                    "wine",
                    "fertilizer",
                    "organic"
                  ],
                  "description": "Agricultural market sector"
                },
                "tradeType": {
                  "type": "string",
                  "enum": [
                    "import",
                    "export",
                    "both"
                  ],
                  "description": "Type of trade data to retrieve"
                },
                "memberState": {
                  "type": "string",
                  "description": "EU member state code (e.g., \"DE\", \"FR\", \"IT\") or \"EU\" for aggregate data"
                },
                "partnerCountry": {
                  "type": "string",
                  "description": "Partner country for trade data (e.g., \"US\", \"BR\", \"AR\")"
                },
                "limit": {
                  "type": "number",
                  "description": "Maximum number of trade records to return",
                  "minimum": 1,
                  "maximum": 50
                }
              },
              "required": [
                "sector"
              ]
            }
          },
          {
            "name": "getEUMarketDashboard",
            "description": "Get comprehensive market dashboard with key indicators, trends, and highlights for a specific agricultural sector.",
            "parameters": {
              "type": "object",
              "properties": {
                "sector": {
                  "type": "string",
                  "enum": [
                    "beef",
                    "pigmeat",
                    "dairy",
                    "eggs-poultry",
                    "sheep-goat",
                    "cereals",
                    "rice",
                    "oilseeds",
                    "fruits-vegetables",
                    "sugar",
                    "olive-oil",
                    "wine",
                    "fertilizer",
                    "organic"
                  ],
                  "description": "Agricultural market sector"
                }
              },
              "required": [
                "sector"
              ]
            }
          },
          {
            "name": "getUSDAMarketPrices",
            "description": "Get current agricultural market prices from USDA for North American markets including US, Canada, and Mexico.",
            "parameters": {
              "type": "object",
              "properties": {
                "category": {
                  "type": "string",
                  "enum": [
                    "grain",
                    "livestock",
                    "dairy",
                    "poultry",
                    "fruits",
                    "vegetables",
                    "specialty"
                  ],
                  "description": "Agricultural market category"
                },
                "region": {
                  "type": "string",
                  "enum": [
                    "US",
                    "CA",
                    "MX",
                    "Midwest",
                    "Southeast",
                    "Northeast",
                    "Southwest",
                    "West"
                  ],
                  "description": "North American region"
                },
                "limit": {
                  "type": "number",
                  "description": "Maximum number of results to return",
                  "default": 10
                }
              },
              "required": [
                "category"
              ]
            }
          },
          {
            "name": "getUSDAProductionData",
            "description": "Get agricultural production statistics from USDA for North American regions.",
            "parameters": {
              "type": "object",
              "properties": {
                "category": {
                  "type": "string",
                  "enum": [
                    "grain",
                    "livestock",
                    "dairy",
                    "poultry",
                    "fruits",
                    "vegetables",
                    "specialty"
                  ],
                  "description": "Agricultural category"
                },
                "region": {
                  "type": "string",
                  "description": "North American region"
                },
                "year": {
                  "type": "number",
                  "description": "Production year"
                },
                "limit": {
                  "type": "number",
                  "description": "Maximum number of results to return",
                  "default": 10
                }
              },
              "required": [
                "category"
              ]
            }
          },
          {
            "name": "getUSDATradeData",
            "description": "Get agricultural trade data (imports/exports) from USDA for North American markets.",
            "parameters": {
              "type": "object",
              "properties": {
                "category": {
                  "type": "string",
                  "enum": [
                    "grain",
                    "livestock",
                    "dairy",
                    "poultry",
                    "fruits",
                    "vegetables",
                    "specialty"
                  ],
                  "description": "Agricultural category"
                },
                "tradeType": {
                  "type": "string",
                  "enum": [
                    "export",
                    "import"
                  ],
                  "description": "Type of trade data"
                },
                "country": {
                  "type": "string",
                  "description": "Trading partner country"
                },
                "limit": {
                  "type": "number",
                  "description": "Maximum number of results to return",
                  "default": 10
                }
              },
              "required": [
                "category"
              ]
            }
          },
          {
            "name": "getUSDAMarketDashboard",
            "description": "Get comprehensive market dashboard with key indicators for North American agricultural markets.",
            "parameters": {
              "type": "object",
              "properties": {
                "category": {
                  "type": "string",
                  "enum": [
                    "grain",
                    "livestock",
                    "dairy",
                    "poultry",
                    "fruits",
                    "vegetables",
                    "specialty"
                  ],
                  "description": "Agricultural market category"
                }
              },
              "required": [
                "category"
              ]
            }
          },
          {
            "name": "getAuravantFields",
            "description": "Get all fields from Auravant farm management system",
            "parameters": {
              "type": "object",
              "properties": {},
              "required": []
            }
          },
          {
            "name": "getAuravantFarms",
            "description": "Get all farms from Auravant farm management system",
            "parameters": {
              "type": "object",
              "properties": {},
              "required": []
            }
          },
          {
            "name": "getAuravantLabourOperations",
            "description": "Get labour operations (field activities) from Auravant",
            "parameters": {
              "type": "object",
              "properties": {
                "yeargroup": {
                  "type": "number",
                  "description": "Year group for the operations (e.g., 2024)"
                },
                "farm_id": {
                  "type": "number",
                  "description": "Filter by specific farm ID"
                },
                "field_id": {
                  "type": "number",
                  "description": "Filter by specific field ID"
                },
                "date_from": {
                  "type": "string",
                  "description": "Start date filter (YYYY-MM-DD)"
                },
                "date_to": {
                  "type": "string",
                  "description": "End date filter (YYYY-MM-DD)"
                },
                "status": {
                  "type": "number",
                  "enum": [
                    1,
                    2,
                    3
                  ],
                  "description": "Operation status: 1=Planned, 2=Executed, 3=Cancelled"
                }
              },
              "required": [
                "yeargroup"
              ]
            }
          },
          {
            "name": "getAuravantLivestock",
            "description": "Get livestock herds from Auravant (unique feature not available in other systems)",
            "parameters": {
              "type": "object",
              "properties": {},
              "required": []
            }
          },
          {
            "name": "createAuravantSowing",
            "description": "Create a sowing operation in Auravant",
            "parameters": {
              "type": "object",
              "properties": {
                "field_id": {
                  "type": "number",
                  "description": "ID of the field for sowing"
                },
                "yeargroup": {
                  "type": "number",
                  "description": "Year group (e.g., 2024)"
                },
                "date": {
                  "type": "string",
                  "description": "Sowing date (YYYY-MM-DD)"
                },
                "surface": {
                  "type": "number",
                  "description": "Surface area in hectares"
                },
                "crop_id": {
                  "type": "number",
                  "description": "ID of the crop being sown"
                },
                "variety_id": {
                  "type": "number",
                  "description": "ID of the crop variety (optional)"
                }
              },
              "required": [
                "field_id",
                "yeargroup",
                "date",
                "surface",
                "crop_id"
              ]
            }
          },
          {
            "name": "createAuravantHarvest",
            "description": "Create a harvest operation in Auravant",
            "parameters": {
              "type": "object",
              "properties": {
                "field_id": {
                  "type": "number",
                  "description": "ID of the field for harvest"
                },
                "yeargroup": {
                  "type": "number",
                  "description": "Year group (e.g., 2024)"
                },
                "date": {
                  "type": "string",
                  "description": "Harvest date (YYYY-MM-DD)"
                },
                "surface": {
                  "type": "number",
                  "description": "Surface area harvested in hectares"
                },
                "crop_id": {
                  "type": "number",
                  "description": "ID of the crop being harvested"
                },
                "yield": {
                  "type": "number",
                  "description": "Yield in tons per hectare"
                },
                "humidity": {
                  "type": "number",
                  "description": "Humidity percentage"
                }
              },
              "required": [
                "field_id",
                "yeargroup",
                "date",
                "surface",
                "crop_id"
              ]
            }
          },
          {
            "name": "getAuravantWorkOrders",
            "description": "Get work orders from Auravant for planning and scheduling",
            "parameters": {
              "type": "object",
              "properties": {
                "yeargroup": {
                  "type": "number",
                  "description": "Year group for work orders"
                },
                "status": {
                  "type": "string",
                  "description": "Filter by work order status"
                }
              },
              "required": []
            }
          },
          {
            "name": "createAuravantHerd",
            "description": "Create a new livestock herd in Auravant (unique livestock management feature)",
            "parameters": {
              "type": "object",
              "properties": {
                "herd_name": {
                  "type": "string",
                  "description": "Name of the herd"
                },
                "animal_count": {
                  "type": "number",
                  "description": "Number of animals in the herd"
                },
                "weight": {
                  "type": "number",
                  "description": "Average weight of animals"
                },
                "weight_unit": {
                  "type": "string",
                  "enum": [
                    "Kg",
                    "Lb"
                  ],
                  "description": "Weight unit"
                },
                "type_id": {
                  "type": "number",
                  "description": "Type of livestock (1=Cattle, 2=Sheep, 3=Goats, etc.)"
                },
                "field_id": {
                  "type": "number",
                  "description": "Field ID where the herd is located"
                }
              },
              "required": [
                "herd_name",
                "animal_count",
                "type_id"
              ]
            }
          },
          {
            "name": "upload_file_to_john_deere",
            "description": "Upload a file to John Deere with intelligent file type detection. Supports all file types: PRESCRIPTION, BOUNDARY, WORK_DATA, SETUP_FILE, REPORT, OTHER.",
            "parameters": {
              "type": "object",
              "properties": {
                "organizationId": {
                  "type": "string",
                  "description": "John Deere organization ID (optional - will auto-detect if not provided)"
                },
                "fileName": {
                  "type": "string",
                  "description": "Name of the file to upload"
                },
                "fileContent": {
                  "type": "string",
                  "description": "Base64 encoded file content"
                },
                "fileType": {
                  "type": "string",
                  "enum": [
                    "PRESCRIPTION",
                    "BOUNDARY",
                    "WORK_DATA",
                    "SETUP_FILE",
                    "REPORT",
                    "OTHER"
                  ],
                  "description": "Explicit file type (optional - will auto-detect if not provided)"
                },
                "userIntent": {
                  "type": "string",
                  "description": "Description of what the user wants to do with this file (e.g., \"upload prescription for corn field\", \"upload field boundary shapefile\")"
                }
              },
              "required": [
                "fileName",
                "fileContent"
              ]
            }
          },
          {
            "name": "list_john_deere_files",
            "description": "List files available in the connected John Deere account for a specific organization. If no organization ID is provided, it will automatically use the first available organization.",
            "parameters": {
              "type": "object",
              "properties": {
                "organizationId": {
                  "type": "string",
                  "description": "The ID of the organization to list files for. This is optional - if not provided, the first available organization will be used."
                }
              },
              "required": []
            }
          }
        ],
        "message": "Available MCP tools: 29"
      },
      "category": "mcp-tools"
    },
    {
      "endpoint": "/api/mcp/tools",
      "method": "POST",
      "status": 200,
      "success": true,
      "responseTime": 9,
      "data": {
        "success": true,
        "message": "✅ Successfully scheduled **planting** operation for **2024-03-15T10:00:00Z**",
        "data": {
          "id": "op_1753026380178",
          "fieldId": "regression-test-field",
          "operationType": "planting",
          "scheduledDate": "2024-03-15T10:00:00Z",
          "priority": "medium",
          "status": "scheduled",
          "createdAt": "2025-07-20T15:46:20.178Z"
        },
        "actionTaken": "Scheduled planting operation"
      },
      "category": "mcp-tools"
    },
    {
      "endpoint": "/api/mcp/tools",
      "method": "POST",
      "status": 200,
      "success": true,
      "responseTime": 7,
      "data": {
        "success": true,
        "message": "🔧 Successfully scheduled **routine** maintenance for **2024-03-20T09:00:00Z**",
        "data": {
          "id": "maint_1753026380187",
          "equipmentId": "regression-test-equipment",
          "maintenanceType": "routine",
          "scheduledDate": "2024-03-20T09:00:00Z",
          "priority": "medium",
          "status": "scheduled",
          "createdAt": "2025-07-20T15:46:20.187Z"
        },
        "actionTaken": "Scheduled routine maintenance"
      },
      "category": "mcp-tools"
    },
    {
      "endpoint": "/api/mcp/tools",
      "method": "POST",
      "status": 200,
      "success": true,
      "responseTime": 6,
      "data": {
        "success": true,
        "message": "🌾 Generated **AI recommendations** for field regression-test-field",
        "data": {
          "fieldId": "regression-test-field",
          "season": "spring",
          "cropType": "corn",
          "recommendations": [
            {
              "type": "planting",
              "priority": "high",
              "recommendation": "Optimal planting window for corn is approaching. Soil temperature should be above 50°F.",
              "suggestedDate": "2024-04-15",
              "confidence": 0.85
            },
            {
              "type": "fertilizer",
              "priority": "medium",
              "recommendation": "Consider nitrogen application based on soil test results.",
              "suggestedDate": "2024-04-10",
              "confidence": 0.78
            },
            {
              "type": "equipment",
              "priority": "medium",
              "recommendation": "Schedule planter maintenance before planting season.",
              "suggestedDate": "2024-04-05",
              "confidence": 0.92
            }
          ],
          "generatedAt": "2025-07-20T15:46:20.193Z"
        },
        "actionTaken": "Generated field recommendations"
      },
      "category": "mcp-tools"
    },
    {
      "endpoint": "/api/chat/sessions",
      "method": "POST",
      "status": 401,
      "success": false,
      "responseTime": 90,
      "data": {
        "error": "Authentication required"
      },
      "category": "chat",
      "errorType": "Authentication required"
    },
    {
      "endpoint": "/api/chat/johndeere-data",
      "method": "GET",
      "status": 0,
      "success": false,
      "responseTime": 188,
      "errorType": "Body is unusable: Body has already been read",
      "category": "chat"
    },
    {
      "endpoint": "/api/chat/generate-title",
      "method": "POST",
      "status": 400,
      "success": false,
      "responseTime": 337,
      "data": {
        "error": "Message is required"
      },
      "category": "chat",
      "errorType": "Message is required"
    },
    {
      "endpoint": "/api/nonexistent-endpoint",
      "method": "GET",
      "status": 0,
      "success": false,
      "responseTime": 1413,
      "errorType": "Body is unusable: Body has already been read",
      "category": "error-handling"
    },
    {
      "endpoint": "/api/mcp/tools",
      "method": "POST",
      "status": 400,
      "success": false,
      "responseTime": 51,
      "data": {
        "success": false,
        "error": "Tool name is required"
      },
      "category": "error-handling",
      "errorType": "Tool name is required"
    },
    {
      "endpoint": "/api/johndeere/organizations/invalid-org-id/fields",
      "method": "GET",
      "status": 500,
      "success": false,
      "responseTime": 1117,
      "data": {
        "error": "Failed to fetch fields"
      },
      "category": "error-handling",
      "errorType": "Failed to fetch fields"
    }
  ],
  "coverage": {
    "health": true,
    "connection-management": true,
    "authentication": true,
    "organizations": true,
    "files": true,
    "mcp-tools": true,
    "chat": true,
    "error-handling": true
  },
  "summary": "\n📊 JOHN DEERE API REGRESSION TEST RESULTS\n==========================================\n\nTotal Tests: 17\n✅ Passed: 6 (35.3%)\n❌ Failed: 11 (64.7%)\n\n📋 Coverage by Category:\n  health: ✅\n  connection-management: ✅\n  authentication: ✅\n  organizations: ✅\n  files: ✅\n  mcp-tools: ✅\n  chat: ✅\n  error-handling: ✅\n\n⚡ Performance Summary:\n  Average Response Time: 361ms\n  Slowest Request: 1413ms\n  Fastest Request: 6ms\n\n🚨 Failed Tests:\n  ❌ GET /api/johndeere/connection-status - User authentication required. Please sign in first.\n  ❌ GET /api/auth/user - Authentication required\n  ❌ GET /api/auth/johndeere/status - Authentication required\n  ❌ GET /api/johndeere/organizations - Failed to fetch organizations\n  ❌ POST /api/files/upload - Failed to upload file: Content-Type was not one of \"multipart/form-data\" or \"application/x-www-form-urlencoded\".\n  ❌ POST /api/chat/sessions - Authentication required\n  ❌ GET /api/chat/johndeere-data - Body is unusable: Body has already been read\n  ❌ POST /api/chat/generate-title - Message is required\n  ❌ GET /api/nonexistent-endpoint - Body is unusable: Body has already been read\n  ❌ POST /api/mcp/tools - Tool name is required\n  ❌ GET /api/johndeere/organizations/invalid-org-id/fields - Failed to fetch fields\n\n🔍 Key Findings:\n  - Connection Management: Tested ✅\n  - Organizations API: Tested ✅\n  - Field Operations: Not tested ❌\n  - Equipment Management: Not tested ❌\n  - MCP Tools: Tested ✅\n  - Authentication: Tested ✅\n  - Error Handling: Tested ✅\n\nTotal API Categories from Documentation: 10\nCategories Tested: 8\nCoverage Percentage: 80.0%\n    "
}